% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helpers.R
\name{get_onchain_indicators}
\alias{get_onchain_indicators}
\title{Calculate On-Chain Indicators for Cryptocurrency Analysis}
\usage{
get_onchain_indicators(data)
}
\arguments{
\item{data}{A data frame containing cryptocurrency market data, typically the
output from \code{\link{get_market_data()}} or similar structure. Must contain
columns: \code{timestamp}, \code{slug}, \code{close}, \code{volume}, and
\code{market_cap}.}
}
\value{
The input data frame augmented with the following calculated columns:

  \strong{Basic Metrics:}
  \itemize{
    \item \code{returns}: Simple daily returns (close / lag(close) - 1)
    \item \code{log_returns}: Log-normal returns for volatility calculations
    \item \code{volume_ma_7}: 7-day simple moving average of volume
    \item \code{price_ma_50}: 50-day simple moving average of price
    \item \code{price_ma_200}: 200-day simple moving average of price
  }

  \strong{On-Chain Valuation Metrics:}
  \itemize{
    \item \code{nvt}: Network Value to Transactions ratio (market_cap / volume)
    \item \code{nvts}: Smoothed NVT using 14-day SMA of volume
    \item \code{realized_price}: 200-day SMA price (proxy for average acquisition cost)
    \item \code{mvrv}: Market Value to Realized Value ratio (close / realized_price)
  }

  \strong{Miner-Related Metrics:}
  \itemize{
    \item \code{issuance}: Daily Bitcoin issuance based on halving schedule
    \item \code{issuance_usd}: USD value of daily issuance
    \item \code{puell_multiple}: Issuance USD / 365-day MA of issuance USD
  }

  \strong{Signal Regimes:}
  \itemize{
    \item \code{nvt_regime}: Categorical interpretation of NVT
    \item \code{mvrv_regime}: Cycle positioning based on MVRV
    \item \code{puell_signal}: Miner behavior interpretation
    \item \code{regime_combi}: Composite signal combining MVRV and Puell
  }
}
\description{
Derives critical on-chain metrics from price and volume data to assess market
valuation, miner behavior, and network activity. These indicators form the
fundamental analysis layer of the crypto predictive framework, providing
insights into market cycles and potential turning points.
}
\details{
\strong{MVRV Ratio (Market Value to Realized Value)}

MVRV compares current market price to the average price at which coins were
last moved (realized price). Using 200-day SMA as a proxy for realized price:
\itemize{
  \item \strong{< 0.7}: "Extreme Bottom" - Market significantly below average acquisition cost
  \item \strong{0.7 - 0.9}: "Bear Market" - Trading below cost basis
  \item \strong{0.9 - 1.75}: "Bull Market" - Healthy premium to cost basis
  \item \strong{> 1.75}: "Extreme Top" - Excessive unrealized profits
}

\strong{NVT Ratio (Network Value to Transactions)}

Analogous to the P/E ratio in equities, NVT measures whether the network's
valuation is supported by its transaction volume:
\itemize{
  \item \strong{< 30}: "Undervalued" - Network usage high relative to value
  \item \strong{30 - 70}: "Neutral" - Balanced valuation
  \item \strong{> 70}: "Overvalued" - Value exceeds network usage
}

\strong{Puell Multiple}

Measures miner revenue relative to the yearly moving average, identifying
periods of miner capitulation or exceptional profitability:
\itemize{
  \item \strong{< 0.7}: "Miner Capitulation" - Miners selling at a loss
  \item \strong{0.7 - 2.0}: "Neutral" - Normal miner profitability
  \item \strong{> 2.0}: "Miner Selling Pressure" - Miners exceptionally profitable
}

\strong{Composite Signal}

Combines MVRV and Puell for stronger conviction signals:
\itemize{
  \item \strong{Strong Buy}: MVRV Extreme Bottom + Puell Miner Capitulation
  \item \strong{Strong Sell}: MVRV Extreme Top + Puell Miner Selling Pressure
  \item \strong{Neutral}: All other combinations
}
}
\note{
\itemize{
  \item Realized price is approximated using 200-day SMA. True realized price
    requires UTXO-level data and would be more accurate but computationally intensive.
  \item Puell Multiple is Bitcoin-specific due to its dependence on issuance schedule.
  \item First 200 days of data will have NA values for moving averages.
  \item Regime thresholds are based on historical analysis and may require
    adjustment as market dynamics evolve.
}
}
\examples{
\dontrun{
# Get market data first
market_data <- get_market_data("Bitcoin", "2015-01-01")

# Calculate on-chain indicators
onchain_data <- get_onchain_indicators(market_data$data)

# View latest signals
latest <- onchain_data \%>\%
  dplyr::slice_tail(n = 1) \%>\%
  dplyr::select(timestamp, mvrv_regime, puell_signal, regime_combi)
print(latest)

# Plot MVRV history with regime thresholds
library(ggplot2)
onchain_data \%>\%
  tail(365) \%>\%
  ggplot(aes(x = timestamp, y = mvrv)) +
  geom_line() +
  geom_hline(yintercept = c(0.7, 0.9, 1.75), linetype = "dashed", color = "red") +
  labs(title = "MVRV Ratio with Regime Thresholds")
}

}
\references{
\itemize{
  \item MVRV: Murad Mahmudov & Adam Tach√© (2019). "Bitcoin's Realized Value"
  \item NVT: Willy Woo (2017). "Introducing NVT Ratio (Network Value to Transactions Ratio)"
  \item Puell Multiple: David Puell (2019). "The Puell Multiple: A Bitcoin Mining Indicator"
  \item Checkmate (2020). "The Bitcoin On-Chain Market Cycle Guide"
}
}
\seealso{
\itemize{
  \item \code{\link{get_market_data}} for input data acquisition
  \item \code{\link{get_btc_issuance}} for issuance calculation details
  \item \code{\link{get_volatility}} for volatility metrics on returns
  \item Woo, W. (2019). "On-Chain Indicators for Bitcoin Valuation"
}
}
\author{
Filippo Franchini
}
